<!DOCTYPE html>
<html lang="en">
<head>
    {{ partial "head.html" . }}
</head>
<body>
    <header class="site-header" id="header-container">
        {{ partial "header.html" . }}
    </header>

    <div class="container">
        <div id="content-container">
            {{ block "main" . }}{{ end }}
        </div>

        <footer id="footer-container">
            {{ partial "footer.html" . }}
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.querySelector('.theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                });
            }

            const menuToggle = document.querySelector('.menu-toggle');
            const menuContainer = document.querySelector('.menu-container');
            const menuContent = document.querySelector('.menu-content');
            
            if (menuToggle && menuContainer) {
                menuToggle.addEventListener('click', (e) => {
                    document.body.classList.toggle('menu-open');
                    e.stopPropagation();
                });
                
                const menuItems = document.querySelectorAll('.menu-content a:not(.disabled)');
                menuItems.forEach(item => {
                    item.addEventListener('click', () => {
                        document.body.classList.remove('menu-open');
                    });
                });
                
                document.addEventListener('click', (e) => {
                    if (document.body.classList.contains('menu-open') && 
                        !menuContent.contains(e.target) && 
                        !menuToggle.contains(e.target)) {
                        document.body.classList.remove('menu-open');
                    }
                });
            }

            document.body.style.visibility = 'visible';
        });
    </script>
</body>
</html>
